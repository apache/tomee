<?xml version="1.0" encoding="UTF-8"?>
<ejb-jar xmlns="http://geronimo.apache.org/xml/ns/j2ee/ejb/openejb-2.0"
    xmlns:n="http://geronimo.apache.org/xml/ns/naming-1.2"
>
    <environment>
        <moduleId>
            <groupId>itests</groupId>
            <artifactId>itests</artifactId>
            <version>1</version>
            <type>car</type>
        </moduleId>
        <dependencies>
            <dependency>
                <groupId>commons-lang</groupId>
                <artifactId>commons-lang</artifactId>
                <version>2.0</version>
            </dependency>
            <dependency>
                <groupId>junit</groupId>
                <artifactId>junit</artifactId>
                <version>3.8.1</version>
            </dependency>
            <dependency>
                <groupId>org.apache.geronimo.configs</groupId>
                <artifactId>system-database</artifactId>
                <type>car</type>
            </dependency>
        </dependencies>
    </environment>
    <n:resource-ref>
        <n:ref-name>database</n:ref-name>
        <n:pattern>
            <n:groupId>org.apache.geronimo.configs</n:groupId>
            <n:artifactId>system-database</n:artifactId>
            <n:name>SystemDatasource</n:name>
        </n:pattern>
    </n:resource-ref>
    <n:resource-ref>
        <n:ref-name>datasource</n:ref-name>
        <n:pattern>
            <n:groupId>org.apache.geronimo.configs</n:groupId>
            <n:artifactId>system-database</n:artifactId>
            <n:name>SystemDatasource</n:name>
        </n:pattern>
    </n:resource-ref>
    <n:resource-ref>
        <n:ref-name>jdbc/basic/entityDatabase</n:ref-name>
        <n:pattern>
            <n:groupId>org.apache.geronimo.configs</n:groupId>
            <n:artifactId>system-database</n:artifactId>
            <n:name>SystemDatasource</n:name>
        </n:pattern>
    </n:resource-ref>
    <n:resource-ref>
        <n:ref-name>stateless/references/Resource_manager_access</n:ref-name>
        <n:pattern>
            <n:groupId>org.apache.geronimo.configs</n:groupId>
            <n:artifactId>system-database</n:artifactId>
            <n:name>SystemDatasource</n:name>
        </n:pattern>
    </n:resource-ref>
    <n:persistence-context-ref>
        <n:persistence-context-ref-name>persistence/TestContext</n:persistence-context-ref-name>
        <n:persistence-unit-name>openjpa-test-unit</n:persistence-unit-name>
        <n:persistence-context-type>Transactional</n:persistence-context-type>
    </n:persistence-context-ref>
    <n:persistence-context-ref>
        <n:persistence-context-ref-name>persistence/ExtendedTestContext</n:persistence-context-ref-name>
        <n:persistence-unit-name>openjpa-test-unit</n:persistence-unit-name>
        <n:persistence-context-type>Extended</n:persistence-context-type>
    </n:persistence-context-ref>
    <n:persistence-context-ref>
        <n:persistence-context-ref-name>openejb/cmp</n:persistence-context-ref-name>
        <n:persistence-unit-name>cmp</n:persistence-unit-name>
        <n:persistence-context-type>Transactional</n:persistence-context-type>
    </n:persistence-context-ref>
    <n:persistence-unit-ref>
        <n:persistence-unit-ref-name>persistence/TestUnit</n:persistence-unit-ref-name>
        <n:persistence-unit-name>openjpa-test-unit</n:persistence-unit-name>
    </n:persistence-unit-ref>

    <persistence xmlns="http://java.sun.com/xml/ns/persistence" version="1.0">
        <persistence-unit transaction-type="JTA" name="cmp">
            <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
            <jta-data-source>?name=SystemDatasource</jta-data-source>
            <non-jta-data-source>?name=NoTxDatasource</non-jta-data-source>
            <mapping-file>META-INF/jpa.mapping.xml</mapping-file>
            <class>org.apache.openejb.test.entity.cmp.BasicCmpBean</class>
            <exclude-unlisted-classes>false</exclude-unlisted-classes>
        </persistence-unit>
        <persistence-unit transaction-type="JTA" name="openjpa-test-unit">
            <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
            <jta-data-source>?name=SystemDatasource</jta-data-source>
            <non-jta-data-source>?name=NoTxDatasource</non-jta-data-source>
            <class>org.apache.openejb.test.entity.Customer</class>
        </persistence-unit>
    </persistence>
</ejb-jar>
