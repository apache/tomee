<!--

    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements.  See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

<!-- $Rev$ $Date$ -->

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/WD-html-in-xml/DTD/xhtml1-strict.dtd">
<html><head><title>Hello World! --              A basic EJB example</title><link rel="stylesheet" href="default.css"></head><body bgcolor="#ffffff" link="#6763a9" vlink="#6763a9" topmargin="0" bottommargin="0" leftmargin="0" marginheight="0" marginwidth="0"><a name="top"></a><table border="0" cellpadding="0" cellspacing="0" width="712" height="400"><tr><td width="20" valign="top" align="left" bgcolor="#7270c2"><img src="images/dotTrans.gif" width="1" height="1" border="0"></td><td width="95" valign="top" align="left" bgcolor="#7270c2"><img src="images/dotTrans.gif" width="1" height="1" border="0"></td><td width="7" valign="top" align="left"><img src="images/dotTrans.gif" border="0" width="1" height="1"></td><td width="40" valign="top" align="left"><img src="images/dotTrans.gif" width="40" height="6" border="0"></td><td width="430" valign="top" align="left" bgcolor="#5A5CB8"><img src="images/top_2.gif" width="430" height="6" border="0"></td><td width="120" valign="top" align="left" bgcolor="#E24717"><img src="images/top_3.gif" width="120" height="6" border="0"></td></tr><tr><td width="20" bgcolor="#7270c2" valign="top" align="left"><img src="images/dotTrans.gif" border="0" width="1" height="1"></td><td width="95" bgcolor="#7270c2" valign="top" align="left"><img src="images/dotTrans.gif" border="0" width="1" height="1"></td><td width="7" bgcolor="#ffffff" valign="top" align="left"></td><td width="40" valign="top" align="left"><img src="images/dotTrans.gif" width="1" height="1" border="0"></td><td width="430" valign="middle" align="left"><a href="http://www.openejb.org"><span class="menuTopOn">OpenEJB at SourceForge</span></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://openejb.exolab.org"><span class="menuTopOff">OpenEJB at Exolab</span></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><img src="images/dotTrans.gif" width="1" height="2" border="0"></td><td width="120" height="20" valign="top" align="left">&nbsp;</td></tr><tr><td width="20" bgcolor="#7270c2" valign="top" align="left"><img src="images/dotTrans.gif" width="20" height="3" border="0"></td><td width="95" bgcolor="#7270c2" valign="top" align="left"><img src="images/line_sm.gif" width="105" height="3" border="0"></td><td width="7" bgcolor="#a9a5de" valign="top" align="left"><img src="images/line_sm.gif" width="7" height="3" border="0"></td><td width="40" valign="top" align="left"><img src="images/line_light.gif" width="40" height="3" border="0"></td><td width="430" valign="top" align="left"><img src="images/line_light.gif" width="430" height="3" border="0"></td><td width="120" valign="top" align="left"><img src="images/dotTrans.gif" border="0" width="1" height="1"></td></tr><tr><td bgcolor="#7270c2" valign="top" align="left"><img src="images/dotTrans.gif" width="20" height="10" border="0"></td><td width="95" bgcolor="#7270c2" valign="top" align="left"><img src="images/dotTrans.gif" width="1" height="2" border="0"><br><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="top" align="left"><span class="subMenuOn">Main</span></td></tr><tr><td valign="top" align="left"><a href="index.html"><span class="subMenuOff">&nbsp;&nbsp;&nbsp;Welcome!</span></a></td></tr><tr><td valign="top" align="left"><a href="download.html"><span class="subMenuOff">&nbsp;&nbsp;&nbsp;Download</span></a></td></tr><tr><td valign="top" align="left"><a href="lists.html"><span class="subMenuOff">&nbsp;&nbsp;&nbsp;Mailing Lists</span></a></td></tr><tr><td valign="top" align="left"><a href="contributors.html"><span class="subMenuOff">&nbsp;&nbsp;&nbsp;The Team</span></a></td></tr></table><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="top" align="left"><span class="subMenuOn">Users</span></td></tr><tr><td valign="top" align="left"><a href="quickstart.html"><span class="subMenuOff">&nbsp;&nbsp;&nbsp;Quickstart</span></a></td></tr><tr><td valign="top" align="left"><a href="hello-world.html"><span class="subMenuOff">&nbsp;&nbsp;&nbsp;Hello World!</span></a></td></tr><tr><td valign="top" align="left"><a href="deploy.html"><span class="subMenuOff">&nbsp;&nbsp;&nbsp;Deploy</span></a></td></tr><tr><td valign="top" align="left"><a href="start-command.html"><span class="subMenuOff">&nbsp;&nbsp;&nbsp;Startup</span></a></td></tr><tr><td valign="top" align="left"><a href="http://sourceforge.net/tracker/?group_id=44351&atid=439275"><span class="subMenuOff">&nbsp;&nbsp;&nbsp;Support</span></a></td></tr><tr><td valign="top" align="left"><a href="http://sourceforge.net/tracker/index.php?group_id=44351&atid=439277"><span class="subMenuOff">&nbsp;&nbsp;&nbsp;Request Feature</span></a></td></tr></table><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="top" align="left"><span class="subMenuOn">Servers</span></td></tr><tr><td valign="top" align="left"><a href="embedded.html"><span class="subMenuOff">&nbsp;&nbsp;&nbsp;Local Server</span></a></td></tr><tr><td valign="top" align="left"><a href="remote-server.html"><span class="subMenuOff">&nbsp;&nbsp;&nbsp;Remote Server</span></a></td></tr></table><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="top" align="left"><span class="subMenuOn">Adapters</span></td></tr><tr><td valign="top" align="left"><a href="tomcat-adapter.html"><span class="subMenuOff">&nbsp;&nbsp;&nbsp;Tomcat</span></a></td></tr></table><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="top" align="left"><span class="subMenuOn">Integrators</span></td></tr><tr><td valign="top" align="left"><a href="whyopenejb.html"><span class="subMenuOff">&nbsp;&nbsp;&nbsp;Why OpenEJB</span></a></td></tr><tr><td valign="top" align="left"><a href="containersystem.html"><span class="subMenuOff">&nbsp;&nbsp;&nbsp;Overview</span></a></td></tr><tr><td valign="top" align="left"><a href="design_openejb.html"><span class="subMenuOff">&nbsp;&nbsp;&nbsp;Design</span></a></td></tr><tr><td valign="top" align="left"><a href="specification.html"><span class="subMenuOff">&nbsp;&nbsp;&nbsp;Specification</span></a></td></tr><tr><td valign="top" align="left"><a href="OpenEJB_presentaion.ppt"><span class="subMenuOff">&nbsp;&nbsp;&nbsp;Presentation</span></a></td></tr></table><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="top" align="left"><span class="subMenuOn">Developers</span></td></tr><tr><td valign="top" align="left"><a href="release-plan.html"><span class="subMenuOff">&nbsp;&nbsp;&nbsp;Release Plan</span></a></td></tr><tr><td valign="top" align="left"><a href="cvs.html"><span class="subMenuOff">&nbsp;&nbsp;&nbsp;Source Code</span></a></td></tr><tr><td valign="top" align="left"><a href="http://sourceforge.net/projects/openejb/"><span class="subMenuOff">&nbsp;&nbsp;&nbsp;SourceForge</span></a></td></tr></table><img src="images/dotTrans.gif" width="1" height="15" border="0"><br><img src="images/line_sm.gif" width="105" height="3" border="0"><br><A href="http://sourceforge.net"><IMG src="http://sourceforge.net/sflogo.php?group_id=44351" width="88" height="31" border="0" alt="SourceForge Logo"></A></td><td width="7" bgcolor="#a9a5de" valign="top" align="left">&nbsp;</td><td width="40" valign="top" align="left">&nbsp;</td><td rowspan="4" width="430" valign="top"><table cols="1" rows="2" border="0" cellpadding="0" cellspacing="0" width="430"><tr><td valign="top" align="left"><br><img border="0" height="50" hspace="0" src="./images/logo_ejb.gif" vspace="0" width="200"><br><img border="0" height="7" hspace="0" src="images/dotTrans.gif"><br><span class="pageTitle">Hello World!</span><br><span class="pageSubTitle">A basic EJB example</span><br><img border="0" height="1" hspace="0" src="images/dotTrans.gif"></td></tr></table><p></p><br><a name="before"><h2>Before starting</h2></a>      <p><span class="bodyBlack"> This example assumes you have already downloaded and installed OpenEJB in the  directory c:\openejb. Refer to the <a href="quickstart.html">QuickStart Guide</a> if you  haven't yet installed OpenEJB. </span></p> <p><span class="bodyBlack">We also assume that you are running your client from the directory c:\my\app.</span></p>  <a name="bean.class"><h2>Create the bean class</h2></a> <p><span class="bodyBlack"> First, create the package where we will place our ejb and application files. </span></p>  <span class="command">c:\my\app&gt; mkdir org</span><br> <span class="command">c:\my\app&gt; mkdir org\acme</span>  <p><span class="bodyBlack"> In your favorite editor, create the file below. </span></p> <p><span class="bodyBlack"> <table border="0" cellpadding="0" cellspacing="0" width="440"><tr><td bgcolor="#c0c0c0"><i><span class="code-title">c:\my\app\org\acme\HelloBean.java</span></i></td></tr><tr><td bgcolor="#e0e0e0"><span class="code-block"><pre>
package org.acme;

import java.rmi.RemoteException;
import javax.ejb.*;

public class HelloBean implements SessionBean {
  private SessionContext sessionContext;
  public void ejbCreate() {
  }
  public void ejbRemove() {
  }
  public void ejbActivate() {
  }
  public void ejbPassivate() {
  }
  public void setSessionContext(SessionContext sessionContext) {
    this.sessionContext = sessionContext;
  }
  public String sayHello() throws java.rmi.RemoteException {
    return &quot;Hello World!!!!!&quot;;
  }
}
</pre></span></td></tr></table> </span></p>  <a name="ejbhome"><h2>Create the EJB Home interface</h2></a> <p><span class="bodyBlack"> <table border="0" cellpadding="0" cellspacing="0" width="440"><tr><td bgcolor="#c0c0c0"><i><span class="code-title">c:\my\app\org\acme\HelloHome.java</span></i></td></tr><tr><td bgcolor="#e0e0e0"><span class="code-block"><pre>
package org.acme;

import java.rmi.*;
import javax.ejb.*;
import java.util.*;

public interface HelloHome extends EJBHome {
  public HelloObject create() throws RemoteException, CreateException;
}
</pre></span></td></tr></table> </span></p>  <a name="ejbobject"><h2>Create the EJB Object interface</h2></a> <p><span class="bodyBlack"> <table border="0" cellpadding="0" cellspacing="0" width="440"><tr><td bgcolor="#c0c0c0"><i><span class="code-title">c:\my\app\org\acme\HelloObject.java</span></i></td></tr><tr><td bgcolor="#e0e0e0"><span class="code-block"><pre>
package org.acme;

import java.rmi.*;
import javax.ejb.*;
import java.util.*;

public interface HelloObject extends EJBObject {
  public String sayHello() throws RemoteException;
}
</pre></span></td></tr></table> </span></p>  <a name="ejb-jar.xml"><h2>Create the ejb-jar.xml</h2></a> <p><span class="bodyBlack"> <span class="command">c:\my\app&gt; mkdir META-INF</span> </span></p> <p><span class="bodyBlack"> <table border="0" cellpadding="0" cellspacing="0" width="440"><tr><td bgcolor="#c0c0c0"><i><span class="code-title">c:\my\app\META-INF\ejb-jar.xml</span></i></td></tr><tr><td bgcolor="#e0e0e0"><span class="code-block"><pre>
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;ejb-jar&gt;
  &lt;enterprise-beans&gt;
    &lt;session&gt;
      &lt;ejb-name&gt;Hello&lt;/ejb-name&gt;
      &lt;home&gt;org.acme.HelloHome&lt;/home&gt;
      &lt;remote&gt;org.acme.HelloObject&lt;/remote&gt;
      &lt;ejb-class&gt;org.acme.HelloBean&lt;/ejb-class&gt;
      &lt;session-type&gt;Stateless&lt;/session-type&gt;
      &lt;transaction-type&gt;Container&lt;/transaction-type&gt;
    &lt;/session&gt;
  &lt;/enterprise-beans&gt;
  &lt;assembly-descriptor&gt;
    &lt;container-transaction&gt;
      &lt;method&gt;
        &lt;ejb-name&gt;Hello&lt;/ejb-name&gt;
        &lt;method-name&gt;*&lt;/method-name&gt;
      &lt;/method&gt;
      &lt;trans-attribute&gt;Required&lt;/trans-attribute&gt;
    &lt;/container-transaction&gt;
  &lt;/assembly-descriptor&gt;
&lt;/ejb-jar&gt;
</pre></span></td></tr></table> </span></p>  <a name="compile"><h2>Compile the EJB</h2></a> <p><span class="bodyBlack"> <span class="command">C:\my\app&gt; javac org\acme\*.java</span> </span></p>  <p><span class="bodyBlack"> <table border="0" cellpadding="0" cellspacing="0" width="440" bgcolor="#7270c2"><tr><td bgcolor="#7270c2"><span class="note-caption">&nbsp;NOTE</span></td></tr><tr><td bgcolor="#7270c2"><table border="0" cellpadding="7" cellspacing="2" width="100%" bgcolor="#7270c2"><tr><td bgcolor="#FFFFFF"><span class="note"> To compile an EJB, you need to have Sun's EJB library in your classpath.  One has been included for you in the directory lib/ejb-2.0.jar </span></td></tr></table></td></tr></table> </span></p>   <a name="jar"><h2>Package the EJB</h2></a> <p><span class="bodyBlack"> <span class="command">C:\my\app&gt; jar cvf myHelloEjb.jar org META-INF</span> </span></p>  <a name="deploy"><h2>Deploy the EJB jar</h2></a> <p><span class="bodyBlack"> Use the OpenEJB <a href="deploy.html">Deploy Tool</a> to deploy your jar. </span></p>   <p><span class="bodyBlack"> <span class="command">C:\my\app&gt; cd C:\openejb</span><br> <span class="command">C:\openejb&gt; openejb.bat deploy -a -m c:\my\app\myHelloEjb.jar</span> </span></p>   <a name="deploy"><h2>A basic client application</h2></a>  <p><span class="bodyBlack"> Create a basic client application to access your HelloWorld bean. </span></p>   <p><span class="bodyBlack"> <table border="0" cellpadding="0" cellspacing="0" width="440"><tr><td bgcolor="#c0c0c0"><i><span class="code-title">c:\my\app\org\acme\HelloWorld.java</span></i></td></tr><tr><td bgcolor="#e0e0e0"><span class="code-block"><pre>
package org.acme;

import javax.rmi.*;
import javax.naming.*;
import java.util.*;

public class HelloWorld {

 public static void main( String args[]) {
  try{
    
    Properties p = new Properties();
    
    <span class="code-comment">//The JNDI properties you set depend</span>
    <span class="code-comment">//on which server you are using.</span>
    p.put(&quot;java.naming.factory.initial&quot;, ... 
    ...
    
    <span class="code-comment">//Now use those properties to create</span>
    <span class="code-comment">//a JNDI InitialContext with the server.</span>
    InitialContext ctx = new InitialContext( p );
    
    <span class="code-comment">//Lookup the bean using it's deployment id</span>
    Object obj = ctx.lookup(&quot;/Hello&quot;);
    
    <span class="code-comment">//Be good and use RMI remote object narrowing</span>
    <span class="code-comment">//as required by the EJB specification.</span>
    HelloHome ejbHome = (HelloHome)
        PortableRemoteObject.narrow(obj,HelloHome.class);

    <span class="code-comment">//Use the HelloHome to create a HelloObject</span>
    HelloObject ejbObject = ejbHome.create();
    
    <span class="code-comment">//The part we've all been wainting for...</span>
    String message = ejbObject.sayHello();

    <span class="code-comment">//A drum roll please.</span>
    System.out.println( message );
    
  } catch (Exception e){
    e.printStackTrace();
  }
 }
}

</pre></span></td></tr></table> </span></p>   <p><span class="bodyBlack"> JNDI properties for the <a href="embedded.html">Local Server</a> would look like the following.  Be sure to read the Local Server <a href="embedded.html">documentation</a> if you run into any problems. </span></p>   <p><span class="bodyBlack"> <table border="0" cellpadding="0" cellspacing="0" width="440"><tr><td bgcolor="#e0e0e0"><span class="code-block"><pre>
Properties p = new Properties();

p.put(&quot;java.naming.factory.initial&quot;, 
    &quot;org.openejb.core.ivm.naming.InitContextFactory&quot;);
p.put(&quot;openejb.home&quot;, &quot;c:\\openejb&quot;);
    
InitialContext ctx = new InitialContext(p);
</pre></span></td></tr></table> </span></p>  <p><span class="bodyBlack"> JNDI properties for the <a href="remote-server.html">Remote Server</a> would look like the following.  Be sure to start the Remote Server before running your application.  See the Remote Server  <a href="remote-server.html">documentation</a> for more information on  using the Remote Server. </span></p>   <p><span class="bodyBlack"> <table border="0" cellpadding="0" cellspacing="0" width="440"><tr><td bgcolor="#e0e0e0"><span class="code-block"><pre>
Properties p = new Properties();
p.put(&quot;java.naming.factory.initial&quot;, 
    &quot;org.openejb.client.JNDIContext&quot;);
p.put(&quot;java.naming.provider.url&quot;, &quot;127.0.0.1:4201&quot;);
p.put(&quot;java.naming.security.principal&quot;, &quot;myuser&quot;);
p.put(&quot;java.naming.security.credentials&quot;, &quot;mypass&quot;);
    
InitialContext ctx = new InitialContext(p);
</pre></span></td></tr></table> </span></p>  <p><span class="bodyBlack"> Update the HelloWorld.java to contain the right JNDI properties. </span></p>   <a name="compile.app"><h2>Compile the application</h2></a> <p><span class="bodyBlack"> <span class="command">C:\my\app&gt; javac org\acme\HelloWorld.java</span> </span></p>  <p><span class="bodyBlack"> <table border="0" cellpadding="0" cellspacing="0" width="440" bgcolor="#7270c2"><tr><td bgcolor="#7270c2"><span class="note-caption">&nbsp;NOTE</span></td></tr><tr><td bgcolor="#7270c2"><table border="0" cellpadding="7" cellspacing="2" width="100%" bgcolor="#7270c2"><tr><td bgcolor="#FFFFFF"><span class="note"> To compile this application, you need to have Sun's  JNDI library in your classpath.  One has been included for you in the directory lib/jndi_1.2.1.jar </span></td></tr></table></td></tr></table> </span></p>   <a name="run.it"><h2>Run it!</h2></a> <p><span class="bodyBlack"> When you run OpenEJB in embedded server mode, you need all the server libraries in your classpath along with your beans and client code.  Here is a simple script  that will add those classes automactically.  Feel free to use this script, or add it's contents to you own scripts. </span></p>   <table border="0" cellpadding="0" cellspacing="0" width="440"><tr><td bgcolor="#c0c0c0"><i><span class="code-title">c:\my\app\RunIt.bat</span></i></td></tr><tr><td bgcolor="#e0e0e0"><span class="code-block"><pre>
@echo off

set OPENEJB_HOME=C:\openejb
set PATH=%PATH%;%OPENEJB_HOME%\bin
set JAVA=%JAVA_HOME%\bin\java

set CP=
for %%i in (%OPENEJB_HOME%\lib\*.jar) do call cp.bat %%i 
for %%i in (%OPENEJB_HOME%\dist\*.jar) do call cp.bat %%i 
for %%i in (%OPENEJB_HOME%\beans\*.jar) do call cp.bat %%i 
set CLASSPATH=%JAVA_HOME%\lib\tools.jar;%CP%

%JAVA% %OPTIONS% -Dopenejb.home=%OPENEJB_HOME% org.acme.HelloWorld
</pre></span></td></tr></table> <p><span class="bodyBlack"> Now run the script! </span></p>  <p><span class="bodyBlack"> <span class="command">C:\my\app&gt; RunIt</span> </span></p>   <a name="problems"><h2>What if it didn't work</h2></a> <p><span class="bodyBlack"> If you ran into any problems, first check your openejb.log file at c:\openejb\openejb.log. Look for any lines that begin with <span class="bodyTerm">&quot;WARN&quot;</span>, <span class="bodyTerm">&quot;ERROR&quot;</span>, or  <span class="bodyTerm">&quot;FATAL&quot;</span>. </span></p>  <p><span class="bodyBlack"> If the log file doesn't help you, email it to the OpenEJB <a href="lists.html#openejb-user"> user mailing list</a> and let people know you are using the Hello World example. </span></p>  </td><td width="120" height="5" valign="top" align="left">&nbsp;</td></tr><tr height="5"><td width="20" height="5" bgcolor="#7270c2" valign="top" align="left">&nbsp;</td><td width="95" height="5" bgcolor="#7270c2" valign="top">&nbsp;</td><td width="7" height="5" bgcolor="#a9a5de" valign="top" align="left">&nbsp;</td><td width="40" height="5" valign="top" align="left">&nbsp;</td><td width="120" height="5" valign="top" align="left">&nbsp;</td></tr><tr><td width="20" height="5" bgcolor="#7270c2" valign="top" align="left">&nbsp;</td><td width="95" bgcolor="#7270c2" valign="top" align="left">&nbsp;</td><td width="7" bgcolor="#a9a5de" valign="top" align="left"><img src="images/dotTrans.gif" width="1" height="25" border="0"></td><td width="40" valign="top" align="left"><img src="images/dotTrans.gif" width="1" height="25" border="0"></td><td width="120" valign="top" align="left">&nbsp;</td></tr><tr height="5"><td width="20" rowspan="2" height="100%" bgcolor="#7270c2" valign="bottom" align="left"><img src="images/stripes1.gif" width="20" height="125" border="0"></td><td width="95" rowspan="2" height="100%" bgcolor="#7270c2" valign="bottom" align="left"><img src="images/stripe105.gif" width="105" height="125" border="0"></td><td width="7" rowspan="2" height="100%" bgcolor="#a9a5de" valign="top" align="left">&nbsp;</td><td width="40" height="100%" valign="top" align="left">&nbsp;</td><td width="120" height="100%" valign="top" align="left">&nbsp;</td></tr><tr height="5"><td width="40" height="25" valign="top" align="left">&nbsp;</td><td width="430" height="25" valign="bottom" align="left"><br><br><img src="images/line_light.gif" border="0" width="430" height="3"><br><p></p><span class="bodyGrey"><small><notice>     Java, EJB, JDBC, JNDI, JTA, Sun, Sun Microsystems are trademarks or registered     trademarks of Sun Microsystems, Inc. in the United States and in other     countries. XML, XML Schema, XSLT and related standards are trademarks or registered     trademarks of MIT, INRIA, Keio or others, and a product of the World Wide Web     Consortium. All other product names mentioned herein are trademarks of their respective     owners.    </notice><br>&nbsp;<br></small></span><p></p>&nbsp;</td><td width="120" height="25" valign="top" align="left">&nbsp;</td></tr></table></body></html>