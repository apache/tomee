= MicroProfile Metrics `@Histogram`
:index-group: MicroProfile
:jbake-type: page
:jbake-status: published

This is an example on how to use microprofile metrics in TomEE.

== Run the application:

[source,bash]
----
$ mvn clean install tomee:run
----

Within the application, there is an enpoint that will give you a weather
histogram of the most recent New York City temperatures.

== Request:

[source,bash]
----
$ curl -X GET http://localhost:8080/mp-metrics-histogram/weather/histogram
----

== Response:

[source,javascript]
----
{
    "count":15,
    "max":55,
    "mean":44.4,
    "min":27,
    "p50":45.0,
    "p75":46.0,
    "p95":54.0,
    "p98":54.0,
    "p99":54.0,
    "p999":54.0,
    "stddev":7.0710678118654755,
    "unit":"degrees F"
}
----

== Histogram Feature

Microprofile metrics has a feature create a histogram of data.

To use this feature, inject a `MetricRegistry`, register the Histogram, and add
data to the histogram as shown below.

[source,java]
----
@Inject
private MetricRegistry registry;

@Inject
@Metric(name = "temperatures", description = "A histogram metrics example.",
    displayName = "Histogram of Recent New York Temperatures")
private Histogram histogram;

@Path("/histogram")
@GET
@Produces(MediaType.APPLICATION_JSON)
public Histogram getTemperatures() {
    Metadata metadata = new Metadata("temperatures", MetricType.HISTOGRAM, "degrees F");
    metadata.setDescription("A histogram of recent New York temperatures.");
    final int[] RECENT_NEW_YORK_TEMPS = { 46, 45, 50, 46, 45, 27, 30, 48, 55, 54, 45, 41, 45, 43, 46 };
    histogram = registry.histogram(metadata);
    for(int temp : RECENT_NEW_YORK_TEMPS) {
        histogram.update(temp);
    }
    return histogram;
}
----

There are some Histogram configurations defined in the `@Metric` annotation:

*String name* Optional. The name of the metric. If not explicitly given the
name of the annotated object is used.

*String displayName* Optional. A human readable display name for metadata.

*String description* Optional. A description of the metric.

*String[] tags* Optional. An array of Strings in the = format to supply special
tags to a metric.

*boolean reusable* Denotes if a metric with a certain name can be registered in
more than one place. Does not apply to gauges or histograms.

=== For the histogram status:

[source,bash]
----
$ curl -X GET http://localhost:8080/mp-metrics-histogram/weather/histogram/status
----

=== Reponse:

[source,bash]
----
 Here are the most recent New York City temperatures.
----

=== Expected Prometheus format:

[source,text]
----
    # TYPE application:temperatures_degrees F summary histogram
    # TYPE application:temperatures_degrees F_count histogram
    application:temperatures_degrees F_count 15.0
    # TYPE application:temperatures_min_degrees F histogram
    application:temperatures_min_degrees F 27.0
    # TYPE application:temperatures_max_degrees F histogram
    application:temperatures_max_degrees F 55.0
    # TYPE application:temperatures_mean_degrees F histogram
    application:temperatures_mean_degrees F 44.4
    # TYPE application:temperatures_stddev_degrees F histogram
    application:temperatures_stddev_degrees F 7.0710678118654755
    # TYPE application:temperatures_degrees F histogram
    application:temperatures_degrees F{quantile="0.5"} 45.0
    # TYPE application:temperatures_degrees F histogram
    application:temperatures_degrees F{quantile="0.75"} 46.0
    # TYPE application:temperatures_degrees F histogram
    application:temperatures_degrees F{quantile="0.95"} 54.0
    # TYPE application:temperatures_degrees F histogram
    application:temperatures_degrees F{quantile="0.98"} 54.0
    # TYPE application:temperatures_degrees F histogram
    application:temperatures_degrees F{quantile="0.99"} 54.0
    # TYPE application:temperatures_degrees F histogram
    application:temperatures_degrees F{quantile="0.999"} 54.0
    # TYPE application:org_superbiz_histogram_weather_service_temperatures summary histogram
    # TYPE application:org_superbiz_histogram_weather_service_temperatures_count histogram
    application:org_superbiz_histogram_weather_service_temperatures_count 0.0
    # TYPE application:org_superbiz_histogram_weather_service_temperatures_min histogram
    application:org_superbiz_histogram_weather_service_temperatures_min 0.0
    # TYPE application:org_superbiz_histogram_weather_service_temperatures_max histogram
    application:org_superbiz_histogram_weather_service_temperatures_max 0.0
    # TYPE application:org_superbiz_histogram_weather_service_temperatures_mean histogram
    application:org_superbiz_histogram_weather_service_temperatures_mean NaN
    # TYPE application:org_superbiz_histogram_weather_service_temperatures_stddev histogram
    application:org_superbiz_histogram_weather_service_temperatures_stddev 0.0
    # TYPE application:org_superbiz_histogram_weather_service_temperatures histogram
    application:org_superbiz_histogram_weather_service_temperatures{quantile="0.5"} 0.0
    # TYPE application:org_superbiz_histogram_weather_service_temperatures histogram
    application:org_superbiz_histogram_weather_service_temperatures{quantile="0.75"} 0.0
    # TYPE application:org_superbiz_histogram_weather_service_temperatures histogram
    application:org_superbiz_histogram_weather_service_temperatures{quantile="0.95"} 0.0
    # TYPE application:org_superbiz_histogram_weather_service_temperatures histogram
    application:org_superbiz_histogram_weather_service_temperatures{quantile="0.98"} 0.0
    # TYPE application:org_superbiz_histogram_weather_service_temperatures histogram
    application:org_superbiz_histogram_weather_service_temperatures{quantile="0.99"} 0.0
    # TYPE application:org_superbiz_histogram_weather_service_temperatures histogram
    application:org_superbiz_histogram_weather_service_temperatures{quantile="0.999"} 0.0
----

=== Request:

[source,bash]
----
$ curl -X GET http://localhost:8080/mp-metrics-histogram/metrics/application
----

=== Response:

[source,javascript]
----
{
    "org.superbiz.histogram.WeatherService.temperatures": {
        "count":0,
        "max":0,
        "min":0,
        "p50":0.0,
        "p75":0.0,
        "p95":0.0,
        "p98":0.0,
        "p99":0.0,
        "p999":0.0,
        "stddev":0.0,
        "unit":"none"
    }
}
----

== Metric Metadata:

A metric will have a metadata to provide information about it such as
`displayName`, `description`, `tags`, etc.

=== Request:

[source,bash]
----
$ curl -X OPTIONS http://localhost:8080/mp-metrics-histogram/metrics/application
----

=== Response:

[source,javascript]
----
{
    "org.superbiz.histogram.WeatherService.temperatures": {
        "description": "A histogram metrics example.",
        "displayName":"Histogram of Recent New York Temperatures",
        "name":"org.superbiz.histogram.WeatherService.temperatures",
        "reusable":false,
        "tags":"",
        "type":"histogram",
        "typeRaw":"HISTOGRAM",
        "unit":"none"
    }
}
----

=== Test the application:

[source,bash]
----
$ mvn test
----

[source,bash]
----
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running org.superbiz.histogram.WeatherServiceTest
mai 28, 2020 10:16:40 PM org.apache.openejb.arquillian.common.Setup findHome
INFORMAÇÕES: Unable to find home in: /home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/apache-tomee-remote
mai 28, 2020 10:16:41 PM org.apache.openejb.arquillian.common.MavenCache getArtifact
INFORMAÇÕES: Downloading org.apache.tomee:apache-tomee:8.0.2-SNAPSHOT:zip:microprofile please wait...
mai 28, 2020 10:16:41 PM org.apache.openejb.arquillian.common.Zips unzip
INFORMAÇÕES: Extracting '/home/daniel/.m2/repository/org/apache/tomee/apache-tomee/8.0.2-SNAPSHOT/apache-tomee-8.0.2-SNAPSHOT-microprofile.zip' to '/home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/apache-tomee-remote'
mai 28, 2020 10:16:41 PM org.apache.tomee.arquillian.remote.RemoteTomEEContainer configure
INFORMAÇÕES: Downloaded container to: /home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/apache-tomee-remote/apache-tomee-microprofile-8.0.2-SNAPSHOT
28-May-2020 22:16:44.134 INFORMAÇÕES [main] sun.reflect.NativeMethodAccessorImpl.invoke Server version name:   Apache Tomcat (TomEE)/9.0.35 (8.0.2-SNAPSHOT)
28-May-2020 22:16:44.135 INFORMAÇÕES [main] sun.reflect.NativeMethodAccessorImpl.invoke Server built:          May 5 2020 20:36:20 UTC
28-May-2020 22:16:44.135 INFORMAÇÕES [main] sun.reflect.NativeMethodAccessorImpl.invoke Server version number: 9.0.35.0
28-May-2020 22:16:44.136 INFORMAÇÕES [main] sun.reflect.NativeMethodAccessorImpl.invoke OS Name:               Linux
28-May-2020 22:16:44.136 INFORMAÇÕES [main] sun.reflect.NativeMethodAccessorImpl.invoke OS Version:            5.0.0-23-generic
28-May-2020 22:16:44.136 INFORMAÇÕES [main] sun.reflect.NativeMethodAccessorImpl.invoke Architecture:          amd64
28-May-2020 22:16:44.137 INFORMAÇÕES [main] sun.reflect.NativeMethodAccessorImpl.invoke Java Home:             /home/daniel/desenvolvimento/jdk8u162-b12_openj9-0.8.0/jre
28-May-2020 22:16:44.137 INFORMAÇÕES [main] sun.reflect.NativeMethodAccessorImpl.invoke JVM Version:           1.8.0_162-b12
28-May-2020 22:16:44.138 INFORMAÇÕES [main] sun.reflect.NativeMethodAccessorImpl.invoke JVM Vendor:            Eclipse OpenJ9
28-May-2020 22:16:44.138 INFORMAÇÕES [main] sun.reflect.NativeMethodAccessorImpl.invoke CATALINA_BASE:         /home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/apache-tomee-remote/apache-tomee-microprofile-8.0.2-SNAPSHOT
28-May-2020 22:16:44.139 INFORMAÇÕES [main] sun.reflect.NativeMethodAccessorImpl.invoke CATALINA_HOME:         /home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/apache-tomee-remote/apache-tomee-microprofile-8.0.2-SNAPSHOT
28-May-2020 22:16:44.156 INFORMAÇÕES [main] sun.reflect.NativeMethodAccessorImpl.invoke Command line argument: -Xoptionsfile=/home/daniel/desenvolvimento/jdk8u162-b12_openj9-0.8.0/jre/lib/amd64/compressedrefs/options.default
28-May-2020 22:16:44.156 INFORMAÇÕES [main] sun.reflect.NativeMethodAccessorImpl.invoke Command line argument: -Xlockword:mode=default,noLockword=java/lang/String,noLockword=java/util/MapEntry,noLockword=java/util/HashMap$Entry,noLockword=org/apache/harmony/luni/util/ModifiedMap$Entry,noLockword=java/util/Hashtable$Entry,noLockword=java/lang/invoke/MethodType,noLockword=java/lang/invoke/MethodHandle,noLockword=java/lang/invoke/CollectHandle,noLockword=java/lang/invoke/ConstructorHandle,noLockword=java/lang/invoke/ConvertHandle,noLockword=java/lang/invoke/ArgumentConversionHandle,noLockword=java/lang/invoke/AsTypeHandle,noLockword=java/lang/invoke/ExplicitCastHandle,noLockword=java/lang/invoke/FilterReturnHandle,noLockword=java/lang/invoke/DirectHandle,noLockword=java/lang/invoke/ReceiverBoundHandle,noLockword=java/lang/invoke/DynamicInvokerHandle,noLockword=java/lang/invoke/FieldHandle,noLockword=java/lang/invoke/FieldGetterHandle,noLockword=java/lang/invoke/FieldSetterHandle,noLockword=java/lang/invoke/StaticFieldGetterHandle,noLockword=java/lang/invoke/StaticFieldSetterHandle,noLockword=java/lang/invoke/IndirectHandle,noLockword=java/lang/invoke/InterfaceHandle,noLockword=java/lang/invoke/VirtualHandle,noLockword=java/lang/invoke/PrimitiveHandle,noLockword=java/lang/invoke/InvokeExactHandle,noLockword=java/lang/invoke/InvokeGenericHandle,noLockword=java/lang/invoke/VarargsCollectorHandle,noLockword=java/lang/invoke/ThunkTuple
28-May-2020 22:16:44.157 INFORMAÇÕES [main] sun.reflect.NativeMethodAccessorImpl.invoke Command line argument: -Xjcl:jclse7b_29
28-May-2020 22:16:44.157 INFORMAÇÕES [main] sun.reflect.NativeMethodAccessorImpl.invoke Command line argument: -Dcom.ibm.oti.vm.bootstrap.library.path=/home/daniel/desenvolvimento/jdk8u162-b12_openj9-0.8.0/jre/lib/amd64/compressedrefs:/home/daniel/desenvolvimento/jdk8u162-b12_openj9-0.8.0/jre/lib/amd64
28-May-2020 22:16:44.158 INFORMAÇÕES [main] sun.reflect.NativeMethodAccessorImpl.invoke Command line argument: -Dsun.boot.library.path=/home/daniel/desenvolvimento/jdk8u162-b12_openj9-0.8.0/jre/lib/amd64/compressedrefs:/home/daniel/desenvolvimento/jdk8u162-b12_openj9-0.8.0/jre/lib/amd64
28-May-2020 22:16:44.158 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -Djava.library.path=/home/daniel/desenvolvimento/jdk8u162-b12_openj9-0.8.0/jre/lib/amd64/compressedrefs:/home/daniel/desenvolvimento/jdk8u162-b12_openj9-0.8.0/jre/lib/amd64:/usr/lib64:/usr/lib
28-May-2020 22:16:44.159 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -Djava.home=/home/daniel/desenvolvimento/jdk8u162-b12_openj9-0.8.0/jre
28-May-2020 22:16:44.169 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -Djava.ext.dirs=/home/daniel/desenvolvimento/jdk8u162-b12_openj9-0.8.0/jre/lib/ext
28-May-2020 22:16:44.169 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -Duser.dir=/home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/apache-tomee-remote/apache-tomee-microprofile-8.0.2-SNAPSHOT
28-May-2020 22:16:44.170 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -Djava.class.path=.
28-May-2020 22:16:44.171 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -XX:+HeapDumpOnOutOfMemoryError
28-May-2020 22:16:44.177 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -Xmx512m
28-May-2020 22:16:44.177 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -Xms256m
28-May-2020 22:16:44.177 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -XX:ReservedCodeCacheSize=64m
28-May-2020 22:16:44.179 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -Dtomee.httpPort=34869
28-May-2020 22:16:44.179 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -Dorg.apache.catalina.STRICT_SERVLET_COMPLIANCE=false
28-May-2020 22:16:44.180 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -Dorg.apache.openejb.servlet.filters=org.apache.openejb.arquillian.common.ArquillianFilterRunner=/ArquillianServletRunner
28-May-2020 22:16:44.180 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -Dopenejb.system.apps=true
28-May-2020 22:16:44.182 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -Dtomee.remote.support=true
28-May-2020 22:16:44.183 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -Djava.util.logging.config.file=/home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/apache-tomee-remote/apache-tomee-microprofile-8.0.2-SNAPSHOT/conf/logging.properties
28-May-2020 22:16:44.183 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -javaagent:/home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/apache-tomee-remote/apache-tomee-microprofile-8.0.2-SNAPSHOT/lib/openejb-javaagent.jar
28-May-2020 22:16:44.183 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager
28-May-2020 22:16:44.183 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -Djava.io.tmpdir=/home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/apache-tomee-remote/apache-tomee-microprofile-8.0.2-SNAPSHOT/temp
28-May-2020 22:16:44.183 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -Dcatalina.base=/home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/apache-tomee-remote/apache-tomee-microprofile-8.0.2-SNAPSHOT
28-May-2020 22:16:44.184 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -Dcatalina.home=/home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/apache-tomee-remote/apache-tomee-microprofile-8.0.2-SNAPSHOT
28-May-2020 22:16:44.187 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -Dcatalina.ext.dirs=/home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/apache-tomee-remote/apache-tomee-microprofile-8.0.2-SNAPSHOT/lib
28-May-2020 22:16:44.188 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -Dorg.apache.tomcat.util.http.ServerCookie.ALLOW_HTTP_SEPARATORS_IN_V0=true
28-May-2020 22:16:44.188 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -ea
28-May-2020 22:16:44.188 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -Djava.class.path=/home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/apache-tomee-remote/apache-tomee-microprofile-8.0.2-SNAPSHOT/bin/bootstrap.jar:/home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/apache-tomee-remote/apache-tomee-microprofile-8.0.2-SNAPSHOT/bin/tomcat-juli.jar
28-May-2020 22:16:44.188 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -Dsun.java.command=org.apache.catalina.startup.Bootstrap start
28-May-2020 22:16:44.189 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -Dsun.java.launcher=SUN_STANDARD
28-May-2020 22:16:44.189 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Command line argument: -Dsun.java.launcher.pid=19632
28-May-2020 22:16:44.189 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke The Apache Tomcat Native library which allows using OpenSSL was not found on the java.library.path: [/home/daniel/desenvolvimento/jdk8u162-b12_openj9-0.8.0/jre/lib/amd64/compressedrefs:/home/daniel/desenvolvimento/jdk8u162-b12_openj9-0.8.0/jre/lib/amd64:/usr/lib64:/usr/lib]
28-May-2020 22:16:45.617 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Initializing ProtocolHandler ["http-nio-34869"]
28-May-2020 22:16:46.298 INFORMAÇÕES [main] org.apache.openejb.util.OptionsLog.info Using 'tomee.remote.support=true'
28-May-2020 22:16:46.350 INFORMAÇÕES [main] org.apache.openejb.util.OptionsLog.info Using 'openejb.jdbc.datasource-creator=org.apache.tomee.jdbc.TomEEDataSourceCreator'
28-May-2020 22:16:46.616 INFORMAÇÕES [main] org.apache.openejb.OpenEJB$Instance.<init> ********************************************************************************
28-May-2020 22:16:46.617 INFORMAÇÕES [main] org.apache.openejb.OpenEJB$Instance.<init> OpenEJB http://tomee.apache.org/
28-May-2020 22:16:46.620 INFORMAÇÕES [main] org.apache.openejb.OpenEJB$Instance.<init> Startup: Thu May 28 22:16:46 BRT 2020
28-May-2020 22:16:46.621 INFORMAÇÕES [main] org.apache.openejb.OpenEJB$Instance.<init> Copyright 1999-2018 (C) Apache OpenEJB Project, All Rights Reserved.
28-May-2020 22:16:46.622 INFORMAÇÕES [main] org.apache.openejb.OpenEJB$Instance.<init> Version: 8.0.2-SNAPSHOT
28-May-2020 22:16:46.622 INFORMAÇÕES [main] org.apache.openejb.OpenEJB$Instance.<init> Build date: 20200513
28-May-2020 22:16:46.624 INFORMAÇÕES [main] org.apache.openejb.OpenEJB$Instance.<init> Build time: 04:10
28-May-2020 22:16:46.624 INFORMAÇÕES [main] org.apache.openejb.OpenEJB$Instance.<init> ********************************************************************************
28-May-2020 22:16:46.628 INFORMAÇÕES [main] org.apache.openejb.OpenEJB$Instance.<init> openejb.home = /home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/apache-tomee-remote/apache-tomee-microprofile-8.0.2-SNAPSHOT
28-May-2020 22:16:46.631 INFORMAÇÕES [main] org.apache.openejb.OpenEJB$Instance.<init> openejb.base = /home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/apache-tomee-remote/apache-tomee-microprofile-8.0.2-SNAPSHOT
28-May-2020 22:16:46.638 INFORMAÇÕES [main] org.apache.openejb.cdi.CdiBuilder.initializeOWB Created new singletonService org.apache.openejb.cdi.ThreadSingletonServiceImpl@89a0c2c3
28-May-2020 22:16:46.643 INFORMAÇÕES [main] org.apache.openejb.cdi.CdiBuilder.initializeOWB Succeeded in installing singleton service
28-May-2020 22:16:46.711 INFORMAÇÕES [main] org.apache.openejb.config.ConfigurationFactory.init TomEE configuration file is '/home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/apache-tomee-remote/apache-tomee-microprofile-8.0.2-SNAPSHOT/conf/tomee.xml'
mai 28, 2020 10:16:46 PM org.apache.openejb.client.EventLogger log
INFORMAÇÕES: RemoteInitialContextCreated{providerUri=http://localhost:34869/tomee/ejb}
28-May-2020 22:16:46.827 INFORMAÇÕES [main] org.apache.openejb.config.ConfigurationFactory.configureService Configuring Service(id=Tomcat Security Service, type=SecurityService, provider-id=Tomcat Security Service)
28-May-2020 22:16:46.851 INFORMAÇÕES [main] org.apache.openejb.config.ConfigurationFactory.configureService Configuring Service(id=Default Transaction Manager, type=TransactionManager, provider-id=Default Transaction Manager)
28-May-2020 22:16:46.855 INFORMAÇÕES [main] org.apache.openejb.util.OptionsLog.info Using 'openejb.system.apps=true'
28-May-2020 22:16:46.860 INFORMAÇÕES [main] org.apache.openejb.config.ConfigurationFactory.configureService Configuring Service(id=Default Singleton Container, type=Container, provider-id=Default Singleton Container)
28-May-2020 22:16:46.870 INFORMAÇÕES [main] org.apache.openejb.assembler.classic.Assembler.createRecipe Creating TransactionManager(id=Default Transaction Manager)
28-May-2020 22:16:46.951 INFORMAÇÕES [main] org.apache.openejb.assembler.classic.Assembler.createRecipe Creating SecurityService(id=Tomcat Security Service)
28-May-2020 22:16:46.982 INFORMAÇÕES [main] org.apache.openejb.assembler.classic.Assembler.createRecipe Creating Container(id=Default Singleton Container)
28-May-2020 22:16:47.001 INFORMAÇÕES [main] org.apache.openejb.assembler.classic.Assembler.createApplication Assembling app: openejb
28-May-2020 22:16:47.069 INFORMAÇÕES [main] org.apache.openejb.util.OptionsLog.info Using 'openejb.jndiname.format={deploymentId}{interfaceType.openejbLegacyName}'
28-May-2020 22:16:47.081 INFORMAÇÕES [main] org.apache.openejb.assembler.classic.JndiBuilder.bind Jndi(name=openejb/DeployerBusinessRemote) --> Ejb(deployment-id=openejb/Deployer)
28-May-2020 22:16:47.082 INFORMAÇÕES [main] org.apache.openejb.assembler.classic.JndiBuilder.bind Jndi(name=global/openejb/openejb/openejb/Deployer!org.apache.openejb.assembler.Deployer) --> Ejb(deployment-id=openejb/Deployer)
28-May-2020 22:16:47.083 INFORMAÇÕES [main] org.apache.openejb.assembler.classic.JndiBuilder.bind Jndi(name=global/openejb/openejb/openejb/Deployer) --> Ejb(deployment-id=openejb/Deployer)
28-May-2020 22:16:47.086 INFORMAÇÕES [main] org.apache.openejb.assembler.classic.JndiBuilder.bind Jndi(name=openejb/ConfigurationInfoBusinessRemote) --> Ejb(deployment-id=openejb/ConfigurationInfo)
28-May-2020 22:16:47.086 INFORMAÇÕES [main] org.apache.openejb.assembler.classic.JndiBuilder.bind Jndi(name=global/openejb/openejb/openejb/Deployer!org.apache.openejb.assembler.classic.cmd.ConfigurationInfo) --> Ejb(deployment-id=openejb/ConfigurationInfo)
28-May-2020 22:16:47.092 INFORMAÇÕES [main] org.apache.openejb.assembler.classic.JndiBuilder.bind Jndi(name=MEJB) --> Ejb(deployment-id=MEJB)
28-May-2020 22:16:47.093 INFORMAÇÕES [main] org.apache.openejb.assembler.classic.JndiBuilder.bind Jndi(name=global/openejb/openejb/openejb/Deployer!javax.management.j2ee.ManagementHome) --> Ejb(deployment-id=MEJB)
28-May-2020 22:16:47.106 INFORMAÇÕES [main] org.apache.openejb.assembler.classic.Assembler.startEjbs Created Ejb(deployment-id=MEJB, ejb-name=openejb/Deployer, container=Default Singleton Container)
28-May-2020 22:16:47.110 INFORMAÇÕES [main] org.apache.openejb.assembler.classic.Assembler.startEjbs Created Ejb(deployment-id=openejb/ConfigurationInfo, ejb-name=openejb/Deployer, container=Default Singleton Container)
28-May-2020 22:16:47.115 INFORMAÇÕES [main] org.apache.openejb.assembler.classic.Assembler.startEjbs Created Ejb(deployment-id=openejb/Deployer, ejb-name=openejb/Deployer, container=Default Singleton Container)
28-May-2020 22:16:47.115 INFORMAÇÕES [main] org.apache.openejb.assembler.classic.Assembler.startEjbs Started Ejb(deployment-id=MEJB, ejb-name=openejb/Deployer, container=Default Singleton Container)
28-May-2020 22:16:47.116 INFORMAÇÕES [main] org.apache.openejb.assembler.classic.Assembler.startEjbs Started Ejb(deployment-id=openejb/ConfigurationInfo, ejb-name=openejb/Deployer, container=Default Singleton Container)
28-May-2020 22:16:47.116 INFORMAÇÕES [main] org.apache.openejb.assembler.classic.Assembler.startEjbs Started Ejb(deployment-id=openejb/Deployer, ejb-name=openejb/Deployer, container=Default Singleton Container)
28-May-2020 22:16:47.125 INFORMAÇÕES [main] org.apache.openejb.assembler.classic.Assembler.deployMBean Deployed MBean(openejb.user.mbeans:application=openejb,group=org.apache.openejb.assembler.monitoring,name=JMXDeployer)
28-May-2020 22:16:47.130 INFORMAÇÕES [main] org.apache.openejb.assembler.classic.Assembler.createApplication Deployed Application(path=openejb)
28-May-2020 22:16:47.183 INFORMAÇÕES [main] org.apache.openejb.server.ServiceManager.initServer Creating ServerService(id=cxf)
28-May-2020 22:16:47.382 INFORMAÇÕES [main] org.apache.openejb.server.ServiceManager.initServer Creating ServerService(id=cxf-rs)
28-May-2020 22:16:47.458 INFORMAÇÕES [main] org.apache.openejb.server.SimpleServiceManager.start   ** Bound Services **
28-May-2020 22:16:47.458 INFORMAÇÕES [main] org.apache.openejb.server.SimpleServiceManager.printRow   NAME                 IP              PORT  
28-May-2020 22:16:47.458 INFORMAÇÕES [main] org.apache.openejb.server.SimpleServiceManager.start -------
28-May-2020 22:16:47.458 INFORMAÇÕES [main] org.apache.openejb.server.SimpleServiceManager.start Ready!
28-May-2020 22:16:47.461 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Server initialization in [3.804] milliseconds
28-May-2020 22:16:47.489 INFORMAÇÕES [main] org.apache.tomee.catalina.OpenEJBNamingContextListener.bindResource Importing a Tomcat Resource with id 'UserDatabase' of type 'org.apache.catalina.UserDatabase'.
28-May-2020 22:16:47.490 INFORMAÇÕES [main] org.apache.openejb.assembler.classic.Assembler.createRecipe Creating Resource(id=UserDatabase)
28-May-2020 22:16:47.505 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Starting service [Catalina]
28-May-2020 22:16:47.505 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Starting Servlet engine: [Apache Tomcat (TomEE)/9.0.35 (8.0.2-SNAPSHOT)]
28-May-2020 22:16:47.565 INFORMAÇÕES [main] org.apache.catalina.core.StandardContext.setClassLoaderProperty Unable to set the web application class loader property [clearReferencesRmiTargets] to [true] as the property does not exist.
28-May-2020 22:16:47.566 INFORMAÇÕES [main] org.apache.catalina.core.StandardContext.setClassLoaderProperty Unable to set the web application class loader property [clearReferencesObjectStreamClassCaches] to [true] as the property does not exist.
28-May-2020 22:16:47.566 INFORMAÇÕES [main] org.apache.catalina.core.StandardContext.setClassLoaderProperty Unable to set the web application class loader property [clearReferencesObjectStreamClassCaches] to [true] as the property does not exist.
28-May-2020 22:16:47.567 INFORMAÇÕES [main] org.apache.catalina.core.StandardContext.setClassLoaderProperty Unable to set the web application class loader property [clearReferencesThreadLocals] to [true] as the property does not exist.
28-May-2020 22:16:47.595 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Starting ProtocolHandler ["http-nio-34869"]
28-May-2020 22:16:47.606 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Server startup in [143] milliseconds
28-May-2020 22:16:47.772 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.util.JarExtractor.extract Extracting jar: /home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/arquillian-test-working-dir/0/test.war
28-May-2020 22:16:47.776 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.util.JarExtractor.extract Extracted path: /home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/arquillian-test-working-dir/0/test
28-May-2020 22:16:47.777 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.tomee.catalina.TomcatWebAppBuilder.deployWebApps using default host: localhost
28-May-2020 22:16:47.780 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.tomee.catalina.TomcatWebAppBuilder.init ------------------------- localhost -> /test
28-May-2020 22:16:47.793 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.util.OptionsLog.info Using 'openejb.session.manager=org.apache.tomee.catalina.session.QuickSessionManager'
28-May-2020 22:16:47.865 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.util.OptionsLog.info Using 'tomee.mp.scan=all'
28-May-2020 22:16:48.587 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.config.ConfigurationFactory.configureApplication Configuring enterprise application: /home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/arquillian-test-working-dir/0/test
28-May-2020 22:16:48.917 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.config.ConfigurationFactory.configureService Configuring Service(id=Default Managed Container, type=Container, provider-id=Default Managed Container)
28-May-2020 22:16:48.918 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.config.AutoConfig.createContainer Auto-creating a container for bean test.Comp-396078462: Container(type=MANAGED, id=Default Managed Container)
28-May-2020 22:16:48.918 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.assembler.classic.Assembler.createRecipe Creating Container(id=Default Managed Container)
28-May-2020 22:16:48.926 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.core.managed.SimplePassivater.init Using directory /home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/apache-tomee-remote/apache-tomee-microprofile-8.0.2-SNAPSHOT/temp for stateful session passivation
28-May-2020 22:16:48.949 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.config.AppInfoBuilder.build Enterprise application "/home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/arquillian-test-working-dir/0/test" loaded.
28-May-2020 22:16:48.950 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.assembler.classic.Assembler.createApplication Assembling app: /home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/arquillian-test-working-dir/0/test
28-May-2020 22:16:48.985 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.cdi.CdiBuilder.initSingleton Existing thread singleton service in SystemInstance(): org.apache.openejb.cdi.ThreadSingletonServiceImpl@89a0c2c3
28-May-2020 22:16:49.087 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.cdi.OpenEJBLifecycle.startApplication OpenWebBeans Container is starting...
28-May-2020 22:16:49.092 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.webbeans.plugins.PluginLoader.startUp Adding OpenWebBeansPlugin : [CdiPlugin]
28-May-2020 22:16:49.158 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.cdi.CdiScanner.handleBda Using annotated mode for jar:file:/home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/apache-tomee-remote/apache-tomee-microprofile-8.0.2-SNAPSHOT/lib/geronimo-config-impl-1.2.1.jar!/META-INF/beans.xml looking all classes to find CDI beans, maybe think to add a beans.xml if not there or add the jar to exclusions.list
28-May-2020 22:16:49.631 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.util.OptionsLog.info Using 'tomee.mp.scan=all'
28-May-2020 22:16:50.621 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.webbeans.config.BeansDeployer.validateInjectionPoints All injection points were validated successfully.
28-May-2020 22:16:50.652 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.cdi.OpenEJBLifecycle.startApplication OpenWebBeans Container has started, it took 1565 ms.
28-May-2020 22:16:50.693 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.assembler.classic.Assembler.createApplication Deployed Application(path=/home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/arquillian-test-working-dir/0/test)
28-May-2020 22:16:50.803 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.myfaces.ee.MyFacesContainerInitializer.onStartup Using org.apache.myfaces.ee.MyFacesContainerInitializer
28-May-2020 22:16:50.832 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.myfaces.ee.MyFacesContainerInitializer.onStartup Added FacesServlet with mappings=[/faces/*, *.jsf, *.faces, *.xhtml]
28-May-2020 22:16:50.865 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.jasper.servlet.TldScanner.scanJars At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.
28-May-2020 22:16:50.874 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.tomee.myfaces.TomEEMyFacesContainerInitializer.addListener Installing <listener>org.apache.myfaces.webapp.StartupServletContextListener</listener>
28-May-2020 22:16:50.935 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.myfaces.config.DefaultFacesConfigurationProvider.getStandardFacesConfig Reading standard config META-INF/standard-faces-config.xml
28-May-2020 22:16:51.250 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.myfaces.config.DefaultFacesConfigurationProvider.getClassloaderFacesConfig Reading config : jar:file:/home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/apache-tomee-remote/apache-tomee-microprofile-8.0.2-SNAPSHOT/lib/openwebbeans-jsf-2.0.12.jar!/META-INF/faces-config.xml
28-May-2020 22:16:51.253 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.myfaces.config.DefaultFacesConfigurationProvider.getClassloaderFacesConfig Reading config : jar:file:/home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/apache-tomee-remote/apache-tomee-microprofile-8.0.2-SNAPSHOT/lib/openwebbeans-el22-2.0.12.jar!/META-INF/faces-config.xml
28-May-2020 22:16:51.545 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.myfaces.config.LogMetaInfUtils.logArtifact Artifact 'myfaces-api' was found in version '2.3.6' from path 'file:/home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/apache-tomee-remote/apache-tomee-microprofile-8.0.2-SNAPSHOT/lib/myfaces-api-2.3.6.jar'
28-May-2020 22:16:51.545 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.myfaces.config.LogMetaInfUtils.logArtifact Artifact 'myfaces-impl' was found in version '2.3.6' from path 'file:/home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/apache-tomee-remote/apache-tomee-microprofile-8.0.2-SNAPSHOT/lib/myfaces-impl-2.3.6.jar'
28-May-2020 22:16:51.557 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.myfaces.util.ExternalSpecifications.isCDIAvailable MyFaces CDI support enabled
28-May-2020 22:16:51.558 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.myfaces.spi.impl.DefaultInjectionProviderFactory.getInjectionProvider Using InjectionProvider org.apache.myfaces.spi.impl.CDIAnnotationDelegateInjectionProvider
28-May-2020 22:16:51.615 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.myfaces.util.ExternalSpecifications.isBeanValidationAvailable MyFaces Bean Validation support enabled
28-May-2020 22:16:51.649 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.myfaces.application.ApplicationImpl.getProjectStage Couldn't discover the current project stage, using Production
28-May-2020 22:16:51.651 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.myfaces.config.FacesConfigurator.handleSerialFactory Serialization provider : class org.apache.myfaces.shared_impl.util.serial.DefaultSerialFactory
28-May-2020 22:16:51.660 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.myfaces.config.annotation.DefaultLifecycleProviderFactory.getLifecycleProvider Using LifecycleProvider org.apache.myfaces.config.annotation.Tomcat7AnnotationLifecycleProvider
28-May-2020 22:16:51.697 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.myfaces.webapp.AbstractFacesInitializer.initFaces ServletContext initialized.
28-May-2020 22:16:51.704 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.myfaces.view.facelets.ViewPoolProcessor.initialize org.apache.myfaces.CACHE_EL_EXPRESSIONS web config parameter is set to "noCache". To enable view pooling this param must be set to "alwaysRecompile". View Pooling disabled.
28-May-2020 22:16:51.721 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.myfaces.webapp.StartupServletContextListener.contextInitialized MyFaces Core has started, it took [842] ms.
28-May-2020 22:16:52.379 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication Using readers:
28-May-2020 22:16:52.379 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.cxf.jaxrs.provider.PrimitiveTextProvider@861c9dca
28-May-2020 22:16:52.380 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.cxf.jaxrs.provider.FormEncodingProvider@f47cd8d8
28-May-2020 22:16:52.380 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.cxf.jaxrs.provider.MultipartProvider@1f24dcda
28-May-2020 22:16:52.381 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.cxf.jaxrs.provider.SourceProvider@6f310377
28-May-2020 22:16:52.381 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.cxf.jaxrs.provider.JAXBElementTypedProvider@516c5bf4
28-May-2020 22:16:52.382 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.cxf.jaxrs.provider.JAXBElementProvider@2850e682
28-May-2020 22:16:52.382 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.openejb.server.cxf.rs.johnzon.TomEEJsonbProvider@e8d47854
28-May-2020 22:16:52.383 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.openejb.server.cxf.rs.johnzon.TomEEJsonpProvider@8ed868b2
28-May-2020 22:16:52.384 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.cxf.jaxrs.provider.StringTextProvider@226afde
28-May-2020 22:16:52.384 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.cxf.jaxrs.provider.BinaryDataProvider@c394ce87
28-May-2020 22:16:52.385 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.cxf.jaxrs.provider.DataSourceProvider@6bd566a5
28-May-2020 22:16:52.386 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication Using writers:
28-May-2020 22:16:52.386 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.johnzon.jaxrs.WadlDocumentMessageBodyWriter@f3bb1c9e
28-May-2020 22:16:52.387 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.cxf.jaxrs.nio.NioMessageBodyWriter@9340a317
28-May-2020 22:16:52.387 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.cxf.jaxrs.provider.StringTextProvider@226afde
28-May-2020 22:16:52.388 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.cxf.jaxrs.provider.JAXBElementTypedProvider@516c5bf4
28-May-2020 22:16:52.389 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.cxf.jaxrs.provider.PrimitiveTextProvider@861c9dca
28-May-2020 22:16:52.389 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.cxf.jaxrs.provider.FormEncodingProvider@f47cd8d8
28-May-2020 22:16:52.390 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.cxf.jaxrs.provider.MultipartProvider@1f24dcda
28-May-2020 22:16:52.391 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.geronimo.microprofile.openapi.jaxrs.JacksonOpenAPIYamlBodyWriter@e7375dc4
28-May-2020 22:16:52.392 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.cxf.jaxrs.provider.SourceProvider@6f310377
28-May-2020 22:16:52.397 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.cxf.jaxrs.provider.JAXBElementProvider@2850e682
28-May-2020 22:16:52.397 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.openejb.server.cxf.rs.johnzon.TomEEJsonbProvider@e8d47854
28-May-2020 22:16:52.398 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.openejb.server.cxf.rs.johnzon.TomEEJsonpProvider@8ed868b2
28-May-2020 22:16:52.398 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.cxf.jaxrs.provider.BinaryDataProvider@c394ce87
28-May-2020 22:16:52.399 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.cxf.jaxrs.provider.DataSourceProvider@6bd566a5
28-May-2020 22:16:52.400 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication Using exception mappers:
28-May-2020 22:16:52.400 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.cxf.jaxrs.impl.WebApplicationExceptionMapper@14991553
28-May-2020 22:16:52.401 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.tomee.microprofile.jwt.MPJWTFilter$MPJWTExceptionMapper@d924a8ca
28-May-2020 22:16:52.402 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.openejb.server.cxf.rs.EJBExceptionMapper@77577227
28-May-2020 22:16:52.402 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.deployApplication      org.apache.cxf.jaxrs.validation.ValidationExceptionMapper@fb3fef2b
28-May-2020 22:16:52.408 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints REST Application: http://localhost:34869/test/                            -> org.apache.openejb.server.rest.InternalApplication@416165fa
28-May-2020 22:16:52.414 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints      Service URI: http://localhost:34869/test/health                      -> Pojo org.apache.geronimo.microprofile.impl.health.cdi.CdiHealthChecksEndpoint
28-May-2020 22:16:52.415 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints               GET http://localhost:34869/test/health                      ->      Response getChecks()
28-May-2020 22:16:52.416 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints      Service URI: http://localhost:34869/test/metrics                     -> Pojo org.apache.geronimo.microprofile.metrics.jaxrs.CdiMetricsEndpoints      
28-May-2020 22:16:52.417 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints               GET http://localhost:34869/test/metrics                     ->      Object getJson(SecurityContext, UriInfo)                    
28-May-2020 22:16:52.417 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints               GET http://localhost:34869/test/metrics                     ->      String getText(SecurityContext, UriInfo)                    
28-May-2020 22:16:52.418 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints               GET http://localhost:34869/test/metrics/{registry}          ->      Object getJson(String, SecurityContext, UriInfo)            
28-May-2020 22:16:52.419 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints               GET http://localhost:34869/test/metrics/{registry}          ->      String getText(String, SecurityContext, UriInfo)            
28-May-2020 22:16:52.419 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints               GET http://localhost:34869/test/metrics/{registry}/{metric} ->      Object getJson(String, String, SecurityContext, UriInfo)    
28-May-2020 22:16:52.421 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints               GET http://localhost:34869/test/metrics/{registry}/{metric} ->      String getText(String, String, SecurityContext, UriInfo)    
28-May-2020 22:16:52.422 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints           OPTIONS http://localhost:34869/test/metrics/{registry}          ->      Object getMetadata(String, SecurityContext, UriInfo)        
28-May-2020 22:16:52.423 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints           OPTIONS http://localhost:34869/test/metrics/{registry}/{metric} ->      Object getMetadata(String, String, SecurityContext, UriInfo)
28-May-2020 22:16:52.425 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints      Service URI: http://localhost:34869/test/openapi                     -> Pojo org.apache.geronimo.microprofile.openapi.jaxrs.OpenAPIEndpoint          
28-May-2020 22:16:52.425 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints               GET http://localhost:34869/test/openapi                     ->      OpenAPI get()
28-May-2020 22:16:52.427 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints      Service URI: http://localhost:34869/test/weather                     -> Pojo org.superbiz.histogram.WeatherService                                   
28-May-2020 22:16:52.428 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints               GET http://localhost:34869/test/weather/histogram           ->      Histogram getTemperatures()
28-May-2020 22:16:52.429 INFORMAÇÕES [http-nio-34869-exec-6] org.apache.openejb.server.cxf.rs.CxfRsHttpListener.logEndpoints               GET http://localhost:34869/test/weather/histogram/status    ->      String histogramStatus()   
28-May-2020 22:16:53.682 INFORMAÇÕES [http-nio-34869-exec-1] org.apache.geronimo.microprofile.opentracing.microprofile.zipkin.ZipkinLogger.onZipkinSpan [{"annotations":[{"timestamp":1590715013486000,"value":"sr"},{"timestamp":1590715013634000,"value":"ss"}],"binaryAnnotations":[{"key":"http.status_code","type":3,"value":200},{"key":"component","type":6,"value":"jaxrs"},{"key":"span.kind","type":6,"value":"server"},{"key":"http.url","type":6,"value":"http://localhost:34869/test/weather/histogram"},{"key":"http.method","type":6,"value":"GET"}],"duration":148000,"id":2,"kind":"SERVER","localEndpoint":{"ipv4":"127.0.0.1","port":34869,"serviceName":"danieldiasjava_19632"},"name":"GET:org.superbiz.histogram.WeatherService.getTemperatures","parentId":0,"tags":{"http.status_code":"200","component":"jaxrs","http.url":"http://localhost:34869/test/weather/histogram","http.method":"GET"},"timestamp":1590715013486000,"traceId":1}]
28-May-2020 22:16:53.717 INFORMAÇÕES [http-nio-34869-exec-1] org.apache.geronimo.microprofile.opentracing.microprofile.zipkin.ZipkinLogger.onZipkinSpan [{"annotations":[{"timestamp":1590715013691000,"value":"sr"},{"timestamp":1590715013715000,"value":"ss"}],"binaryAnnotations":[{"key":"http.status_code","type":3,"value":200},{"key":"component","type":6,"value":"jaxrs"},{"key":"span.kind","type":6,"value":"server"},{"key":"http.url","type":6,"value":"http://localhost:34869/test/metrics/application"},{"key":"http.method","type":6,"value":"GET"}],"duration":24000,"id":4,"kind":"SERVER","localEndpoint":{"ipv4":"127.0.0.1","port":34869,"serviceName":"danieldiasjava_19632"},"name":"GET:org.apache.geronimo.microprofile.metrics.jaxrs.CdiMetricsEndpoints.getText","parentId":0,"tags":{"http.status_code":"200","component":"jaxrs","http.url":"http://localhost:34869/test/metrics/application","http.method":"GET"},"timestamp":1590715013691000,"traceId":3}]
28-May-2020 22:16:53.763 INFORMAÇÕES [http-nio-34869-exec-7] org.apache.geronimo.microprofile.opentracing.microprofile.zipkin.ZipkinLogger.onZipkinSpan [{"annotations":[{"timestamp":1590715013755000,"value":"sr"},{"timestamp":1590715013761000,"value":"ss"}],"binaryAnnotations":[{"key":"http.status_code","type":3,"value":200},{"key":"component","type":6,"value":"jaxrs"},{"key":"span.kind","type":6,"value":"server"},{"key":"http.url","type":6,"value":"http://localhost:34869/test/metrics/application"},{"key":"http.method","type":6,"value":"GET"}],"duration":6000,"id":6,"kind":"SERVER","localEndpoint":{"ipv4":"127.0.0.1","port":34869,"serviceName":"danieldiasjava_19632"},"name":"GET:org.apache.geronimo.microprofile.metrics.jaxrs.CdiMetricsEndpoints.getJson","parentId":0,"tags":{"http.status_code":"200","component":"jaxrs","http.url":"http://localhost:34869/test/metrics/application","http.method":"GET"},"timestamp":1590715013755000,"traceId":5}]
28-May-2020 22:16:53.962 INFORMAÇÕES [http-nio-34869-exec-8] org.apache.geronimo.microprofile.opentracing.microprofile.zipkin.ZipkinLogger.onZipkinSpan [{"annotations":[{"timestamp":1590715013934000,"value":"sr"},{"timestamp":1590715013959000,"value":"ss"}],"binaryAnnotations":[{"key":"http.status_code","type":3,"value":200},{"key":"component","type":6,"value":"jaxrs"},{"key":"span.kind","type":6,"value":"server"},{"key":"http.url","type":6,"value":"http://localhost:34869/test/metrics/application"},{"key":"http.method","type":6,"value":"OPTIONS"}],"duration":25000,"id":8,"kind":"SERVER","localEndpoint":{"ipv4":"127.0.0.1","port":34869,"serviceName":"danieldiasjava_19632"},"name":"OPTIONS:org.apache.geronimo.microprofile.metrics.jaxrs.CdiMetricsEndpoints.getMetadata","parentId":0,"tags":{"http.status_code":"200","component":"jaxrs","http.url":"http://localhost:34869/test/metrics/application","http.method":"OPTIONS"},"timestamp":1590715013934000,"traceId":7}]
mai 28, 2020 10:16:53 PM org.apache.openejb.client.EventLogger log
INFORMAÇÕES: RemoteInitialContextCreated{providerUri=http://localhost:34869/tomee/ejb}
28-May-2020 22:16:54.010 INFORMAÇÕES [http-nio-34869-exec-10] org.apache.openejb.assembler.classic.Assembler.destroyApplication Undeploying app: /home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/arquillian-test-working-dir/0/test
mai 28, 2020 10:16:54 PM org.apache.openejb.arquillian.common.TomEEContainer undeploy
INFORMAÇÕES: cleaning /home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/arquillian-test-working-dir/0/test.war
mai 28, 2020 10:16:54 PM org.apache.openejb.arquillian.common.TomEEContainer undeploy
INFORMAÇÕES: cleaning /home/daniel/git/apache/tomee/examples/mp-metrics-histogram/target/arquillian-test-working-dir/0/test
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 13.937 sec
28-May-2020 22:16:54.184 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke A valid shutdown command was received via the shutdown port. Stopping the Server instance.
28-May-2020 22:16:54.185 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Pausing ProtocolHandler ["http-nio-34869"]
28-May-2020 22:16:54.196 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Stopping service [Catalina]
28-May-2020 22:16:54.203 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Stopping ProtocolHandler ["http-nio-34869"]
28-May-2020 22:16:54.206 INFORMAÇÕES [main] org.apache.openejb.server.SimpleServiceManager.stop Stopping server services
28-May-2020 22:16:54.226 INFORMAÇÕES [main] org.apache.openejb.assembler.classic.Assembler.destroyApplication Undeploying app: openejb
28-May-2020 22:16:54.231 GRAVE [main] org.apache.openejb.core.singleton.SingletonInstanceManager.undeploy Unable to unregister MBean openejb.management:J2EEServer=openejb,J2EEApplication=<empty>,EJBModule=openejb,SingletonSessionBean=openejb/Deployer,name=openejb/Deployer,j2eeType=Invocations
28-May-2020 22:16:54.232 GRAVE [main] org.apache.openejb.core.singleton.SingletonInstanceManager.undeploy Unable to unregister MBean openejb.management:J2EEServer=openejb,J2EEApplication=<empty>,EJBModule=openejb,SingletonSessionBean=openejb/Deployer,name=openejb/Deployer,j2eeType=Invocations
28-May-2020 22:16:54.265 INFORMAÇÕES [main] sun.reflect.DelegatingMethodAccessorImpl.invoke Destroying ProtocolHandler ["http-nio-34869"]

Results :

Tests run: 2, Failures: 0, Errors: 0, Skipped: 0
----
